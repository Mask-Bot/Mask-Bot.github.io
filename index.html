<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <title>Mask???</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        body {
            display: flex;
            flex-direction: column;
            background-color: #000;
            color: #fff;
            background-image: url('bg.jpg');
            background-size: cover;
            background-position: center;
            overflow: auto;
        }
        .content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
        }
        .coins {
            font-size: 30px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            margin-top: -20px;
        }
        .navbar {
            display: flex;
            justify-content: space-around;
            background-color: #1a1a1a;
            color: #fff;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.5);
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 1000;
        }

        .navbar button {
            background-color: #333;
            color: #fff;
            border: none;
            padding: 15px;
            font-size: 4vw; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º viewport width –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–∫—Å—Ç–∞ */
            flex: 1;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            margin: 0 1%; /* –ú–µ–Ω—å—à–∏–π –æ—Ç—Å—Ç—É–ø –¥–ª—è –ª—É—á—à–µ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ */
            border-radius: 5px;
            max-width: 30%; /* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É –∫–Ω–æ–ø–æ–∫ */
        }

        .navbar button:hover {
            background-color: #555;
            transform: scale(1.05);
        }

        .navbar button:active {
            background-color: #777;
            transform: scale(0.95);
        }

        /* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å –¥–ª—è –±–æ–ª–µ–µ –º–µ–ª–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 600px) {
            .navbar button {
                padding: 10px;
                font-size: 5vw; /* –ë–æ–ª—å—à–µ —à—Ä–∏—Ñ—Ç –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
                margin: 0 2%; /* –£–º–µ–Ω—å—à–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
            }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.5s ease-in-out;
        }
        .modal-content {
            background-color: #fff;
            color: #000;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            text-align: center;
            border-radius: 10px;
            animation: zoomIn 0.5s ease-in-out;
        }
        .modal-content h2 {
            margin: 0 0 20px;
        }
        .modal-content p {
            font-size: 20px;
            margin: 10px 0;
        }
        .modal-content button {
            background-color: #000;
            color: #fff;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
        }
        .modal-content button:hover {
            background-color: #444;
        }
        .leaderboard {
            text-align: center;
            margin-top: 2px;
            padding: 20px;
            border-radius: 10px;
            background: none; /* –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞ */
        }
        .player-rank {
            background: rgba(255, 255, 255, 0); /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            border: 3px solid white; /* –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞ */
            color: #fff; /* –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç */
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            font-size: 20px;
            position: relative; /* –î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç–º–æ–¥–∑–∏ */
        }
        .player-rank p {
            margin: 0; /* –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤ */
            font-size: 24px; /* –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            font-weight: bold; /* –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç */
        }
        .player-rank::before {
            content: 'üéØ'; /* –≠–º–æ–¥–∑–∏ –º–∏—à–µ–Ω–∏ */
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px; /* –†–∞–∑–º–µ—Ä —ç–º–æ–¥–∑–∏ */
        }
        .leaderboard-info {
            display: flex;
            justify-content: space-between; /* –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ */
            align-items: center; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            margin: 10px 0;
            font-size: 20px;
            width: 100%;
        }
        .leaderboard-info span {
            margin: 0 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
        }
        .leaderboard ul {
            list-style: none;
            padding: 0;
            margin: 0;
            width: 100%; /* –†–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞ */
            box-sizing: border-box; /* –£—á–∏—Ç—ã–≤–∞—Ç—å padding –∏ border –≤ —à–∏—Ä–∏–Ω–µ —ç–ª–µ–º–µ–Ω—Ç–∞ */
        }
        .leaderboard li {
            background: rgba(255, 255, 255, 0.5); /* –ë–µ–ª—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            color: #000; /* –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç */
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            align-items: center;
            width: 90vw; /* –†–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞ */
            box-sizing: border-box; /* –£—á–∏—Ç—ã–≤–∞—Ç—å padding –∏ border –≤ —à–∏—Ä–∏–Ω–µ —ç–ª–µ–º–µ–Ω—Ç–∞ */
        }
        .leaderboard .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            text-transform: uppercase;
            margin-right: 10px;
        }
        .leaderboard li span {
            display: inline-block;
            width: auto; /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞ */
        }
        .leaderboard li span.rank {
            margin-right: 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –º–µ–¥–∞–ª—å–∫–æ–π –∏ –∞–≤–∞—Ç–∞—Ä–∫–æ–π */
        }
        .leaderboard li span:last-child {
            text-align: right;
            flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
        }
        .leaderboard li::before {
            margin-right: 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –Ω–æ–º–µ—Ä–æ–º –∏ –Ω–∏–∫–æ–º */
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.5s ease-in-out;
        }
        .modal-content {
            background-color: #fff;
            color: #000;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            text-align: center;
            border-radius: 10px;
            animation: zoomIn 0.5s ease-in-out;
        }
        .modal-content h2 {
            margin: 0 0 20px;
        }
        .modal-content p {
            font-size: 20px;
            margin: 10px 0;
        }
        .modal-content button {
            background-color: #000;
            color: #fff;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
        }
        .modal-content button:hover {
            background-color: #444;
        }


        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ –ó–∞–¥–∞–Ω–∏—è */
        .tasks {
            text-align: center;
            margin-top: 20px;
            padding-bottom: 66px;
        }
        .task-block {
            background: #272727;
            color: #fefefe;
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            text-align: center;
            width: 300px;
            position:relative;
            border: 1px solid #272727;
        }
        .task-block h3 {
            margin-top: 0;
            font-size: 22px;
            font-weight: bold;
        }
        .task {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 32px;
            background-color: #3d3d3d;
            border-radius: 10px;
            margin-left: -7.5px;
            width: 250px;
        }
        .task img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }
        .task-button {
            padding: 10px 20px;
            font-size: 14px;
            background-color: #181818;
            color: #fff;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            width: 100px; /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫*/
            text-align: center;
        }

        .task-button.completed {
            background-color: #282828;
            color: rgb(255, 255, 255);
            border: none;
            width: 60px; /* —Ç–∞ –∂–µ —à–∏—Ä–∏–Ω–∞, —á—Ç–æ –∏ —É –∫–Ω–æ–ø–∫–∏ */
            text-align: center;
        }

        .task-button:hover {
            background-color: #444;
        }

        .task-button:disabled {
            background-color: #282828;
            cursor: not-allowed;
        }

        .task .status {
            font-size: 18px;
            color: rgb(0, 202, 0);
        }
        .task .status.hidden {
            display: none;
        }
        .task .description {
            flex: 1;
            text-align: left;
            padding-left: 10px;
            font-size: 16px;
        }

        #static-timer {
            font-size: 48px;
            font-weight: bold;
            color: #333; /* –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –∂–µ–ª–∞–µ–º—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
            text-align: center;
            margin-top: 15px;
        }

        #ton-connect-button {
            position: fixed;
            bottom: 80px;
            right: 5px;
            z-index: 1000;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–æ–Ω–∞—Ç—É */
        #donateButtons {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: -100px;
        }

        .donateButtonsWrapper {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1px 10px;
            width: 100%;
            max-width: 420px; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è */
            margin-top: 10px;
        }

        .donateButton {
            width: 48%; /* –®–∏—Ä–∏–Ω–∞ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥–≤—É—Ö –∫–Ω–æ–ø–æ–∫ –≤ —Ä—è–¥—É */
            min-height: 80px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–Ω–æ–ø–∫–∏ */
            margin: 5px 0;
            padding: 15px 20px;
            font-size: 1em;
            font-weight: bold;
            background-color: #3d3d3d;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
            position: relative;
            display: flex;
            flex-direction: column; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
            text-align: center;
            white-space: normal; /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É */
            word-wrap: break-word; /* –ü–µ—Ä–µ–Ω–æ—Å–∏–º –¥–ª–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ */
        }

        .donateButton:hover {
            background-color: #555555;
        }

        .donateButton:disabled {
            background-color: #696969;
            cursor: not-allowed;
        }

        .bonusText {
            display: block;
            font-size: 0.8em;
            color: rgb(0, 202, 0);
            margin-top: 5px;
            font-weight: bold;
        }

        #unlockWalletButton {
            background-color: #800000;
            width: 100%; /* –ö–Ω–æ–ø–∫–∞ Unlock Wallet –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
            display: flex;
            justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
            align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            font-weight: bold;
        }

        #unlockWalletButton:disabled {
            background-color: #696969;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <!-- <div id="ton-connect"></div>
    <script>
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://mask-bot.github.io/tonconnect-manifest.json',
            buttonRootId: 'ton-connect'
        });
    </script> -->

    <div id="welcomeModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Welcome Bonus</h2>
            <p>+0.000326 $MASKS</p>
            <button onclick="claimBonus()">Get</button>
        </div>
    </div>
    
    <div id="ton-connect-button"></div>
    <div id="home-page">
        <div id="static-timer">00:00:00</div>
    </div>
    
    <div class="content" id="mainContent">
        <div class="leaderboard" id="leaderboard" style="display: none;">
            <h1>Leaders</h1>
            <div class="player-rank">
                <p id="userRank">Your place: --</p>
            </div>
            <div class="leaderboard-info">
                <span id="userCount">0 players</span>
                <span id="top10">(Top 10)</span>
            </div>
            <ul id="leaderboardList"></ul>
        </div>
        <div class="coins">0 $MASKS</div>
    </div>
    <div class="navbar">
        <button onclick="showHome()">
            <img src="home_icon.png" alt="home" style="width: 30px; height: 30px;">
        </button>
        <button onclick="showLeaderboard()">
            <img src="leaderboard_icon.png" alt="leaderboard" style="width: 30px; height: 30px;">
        </button>
        <button onclick="showTasks()">
            <img src="tasks_icon.png" alt="tasks" style="width: 30px; height: 30px;">
        </button>
        <button onclick="showFriends()">
            <img src="friends_icon.png" alt="friends" style="width: 30px; height: 30px;">
        </button>
        <button onclick="wallet()">
            <img src="wallet_icon.png" alt="wallet" style="width: 30px; height: 30px;">
        </button>
    </div>    

    <script async src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let coins = 0;
        let username = '';
        let leaderboard = [];

        window.onload = function() {
            Telegram.WebApp.expand(); // –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
            Telegram.WebApp.ready();
            const user = Telegram.WebApp.initDataUnsafe.user;
            if (user) {
                username = user.username || user.first_name;
            }
            loadProgress();
            document.getElementById('welcomeModal').style.display = 'flex';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –±–æ–Ω—É—Å–æ–º
        function showWelcomeBonusModal() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ª—É—á–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –±–æ–Ω—É—Å
            if (!localStorage.getItem('bonusClaimed')) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –µ—Å–ª–∏ –±–æ–Ω—É—Å –µ—â–µ –Ω–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω
                document.getElementById('welcomeModal').style.display = 'block';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞
        function claimBonus() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ª—É—á–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –±–æ–Ω—É—Å
            if (localStorage.getItem('bonusClaimed')) {
                alert('You have already received your welcome bonus!');
                return; // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –µ—Å–ª–∏ –±–æ–Ω—É—Å —É–∂–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω
            }

            // –ï—Å–ª–∏ –±–æ–Ω—É—Å –µ—â–µ –Ω–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ
            coins += 0.00146;
            document.getElementById('welcomeModal').style.display = 'none';
            saveProgress();
            updateCoins();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, —á—Ç–æ –±–æ–Ω—É—Å –±—ã–ª –ø–æ–ª—É—á–µ–Ω
            localStorage.setItem('bonusClaimed', 'true');
        }

        // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∫–∞–∑–∞ –±–æ–Ω—É—Å–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = showWelcomeBonusModal;


        function updateCoins() {
            document.querySelector('.coins').textContent = coins + ' $MASKS';
        }

        function showFriends() {
            document.getElementById('mainContent').innerHTML = '';

            // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ–π –≤–∫–ª–∞–¥–∫–∏
            const container = document.createElement('div');
            container.style.padding = '20px';
            container.style.fontFamily = 'Arial, sans-serif';

            // –°–æ–∑–¥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ "Invite your friends!"
            const heading = document.createElement('h1');
            heading.textContent = 'Invite your friends!';
            heading.style.fontSize = '32px';
            heading.style.fontWeight = 'bold';
            heading.style.color = 'white';
            heading.style.textAlign = 'center';
            heading.style.marginBottom = '10px';

            // –°–æ–∑–¥–∞–µ–º –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ "You and your friends will get bonus."
            const subheading = document.createElement('p');
            subheading.textContent = 'You and your friends will get bonus.';
            subheading.style.fontSize = '18px';
            subheading.style.color = '#888'; // –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π
            subheading.style.textAlign = 'center';
            subheading.style.marginBottom = '20px';

            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –±–æ–Ω—É—Å–∞ "+0 $MASKS"
            const bonusText = document.createElement('p');
            bonusText.textContent = '+0 $MASKS'; // –≠—Ç–æ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
            bonusText.style.fontSize = '24px';
            bonusText.style.fontWeight = 'bold';
            bonusText.style.color = '#4CAF50';
            bonusText.style.textAlign = 'center';
            bonusText.style.marginBottom = '30px';

            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É "Claim"
            const claimButton = document.createElement('button');
            claimButton.textContent = 'Claim';
            claimButton.style.padding = '15px 30px';
            claimButton.style.backgroundColor = '#4CAF50';
            claimButton.style.color = 'white';
            claimButton.style.border = 'none';
            claimButton.style.cursor = 'pointer';
            claimButton.style.borderRadius = '10px';
            claimButton.style.fontSize = '18px';
            claimButton.style.marginBottom = '20px';
            claimButton.style.display = 'block';
            claimButton.style.marginLeft = 'auto';
            claimButton.style.marginRight = 'auto';

            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É "Copy invite link"
            const copyButton = document.createElement('button');
            copyButton.textContent = 'Copy invite link';
            copyButton.style.padding = '15px 30px';
            copyButton.style.backgroundColor = '#2196F3';
            copyButton.style.color = 'white';
            copyButton.style.border = 'none';
            copyButton.style.cursor = 'pointer';
            copyButton.style.borderRadius = '10px';
            copyButton.style.fontSize = '18px';
            copyButton.style.display = 'block';
            copyButton.style.marginLeft = 'auto';
            copyButton.style.marginRight = 'auto';

            // –¢–µ–∫—Å—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π
            const invitedPlayersText = document.createElement('p');
            invitedPlayersText.textContent = 'Friends invited: 0'; // –ü–æ—Å—Ç–∞–≤–∏–º 0 –∫–∞–∫ –∑–∞–≥–ª—É—à–∫—É
            invitedPlayersText.style.fontSize = '18px';
            invitedPlayersText.style.fontWeight = 'bold';
            invitedPlayersText.style.textAlign = 'center';
            invitedPlayersText.style.marginTop = '20px';

            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è —Å–±—Ä–æ—Å–∞ –±–æ–Ω—É—Å–∞
            const resetBonusButton = document.createElement('button');
            resetBonusButton.textContent = 'Reset bonus to +0 $MASKS';
            resetBonusButton.style.padding = '15px 30px';
            resetBonusButton.style.backgroundColor = '#FF5722'; // –û—Ä–∞–Ω–∂–µ–≤—ã–π
            resetBonusButton.style.color = 'white';
            resetBonusButton.style.border = 'none';
            resetBonusButton.style.cursor = 'pointer';
            resetBonusButton.style.borderRadius = '10px';
            resetBonusButton.style.fontSize = '18px';
            resetBonusButton.style.display = 'block';
            resetBonusButton.style.marginLeft = 'auto';
            resetBonusButton.style.marginRight = 'auto';
            resetBonusButton.style.marginTop = '20px';

            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
            let referralCount = parseInt(localStorage.getItem('referralCount')) || 0;
            let accumulatedMasks = parseFloat(localStorage.getItem('accumulatedMasks')) || 0;
            let clickCount = parseInt(localStorage.getItem('clickCount')) || 0; // –ü–æ–ª—É—á–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∏ –±–æ–Ω—É—Å–∞
            invitedPlayersText.textContent = `Friends invited: ${referralCount}`;
            bonusText.textContent = `+${accumulatedMasks.toFixed(6)} $MASKS`;

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
            copyButton.addEventListener('click', function() {
                const referralLink = localStorage.getItem('referralLink');
                if (referralLink) {
                    navigator.clipboard.writeText(referralLink).then(function() {
                        alert('Referral link copied!');
                        
                        // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π
                        clickCount++;

                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –≤ localStorage
                        localStorage.setItem('clickCount', clickCount);
                    });
                }
            });

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "Claim"
            claimButton.addEventListener('click', function() {
                addMasksToBalance(accumulatedMasks); // –î–æ–±–∞–≤–ª—è–µ–º –±–æ–Ω—É—Å –∫ –±–∞–ª–∞–Ω—Å—É
            });

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ –±–æ–Ω—É—Å–∞ –Ω–∞ +0 $MASKS
            claimButton.addEventListener('click', function() {
                accumulatedMasks = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ MASKS
                bonusText.textContent = '+0.000000 $MASKS'; // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –±–æ–Ω—É—Å–∞
                localStorage.setItem('accumulatedMasks', '0'); // –û–±–Ω–æ–≤–ª—è–µ–º localStorage
            });

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ –∏ –Ω–∞—á–∏—Å–ª—è–µ–º –±–æ–Ω—É—Å—ã –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–µ
            const randomClicksNeeded = getRandomInt(7, 12); // –°–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ –æ—Ç 7 –¥–æ 12
            if (clickCount >= randomClicksNeeded) {
                referralCount++; // –ù–∞—á–∏—Å–ª—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª

                // –ë–æ–Ω—É—Å –∑–∞ –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
                const bonus = 0.000017; // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ MASKS –∑–∞ –æ–¥–Ω–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
                accumulatedMasks += bonus; // –î–æ–±–∞–≤–ª—è–µ–º –±–æ–Ω—É—Å –≤ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ MASKS

                // –û–±–Ω–æ–≤–ª—è–µ–º localStorage
                localStorage.setItem('referralCount', referralCount);
                localStorage.setItem('accumulatedMasks', accumulatedMasks.toFixed(6));

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥—Ä—É–∑–µ–π –∏ –±–æ–Ω—É—Å–µ
                invitedPlayersText.textContent = `Friends invited: ${referralCount}`;
                bonusText.textContent = `+${accumulatedMasks.toFixed(6)} $MASKS`;

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤
                localStorage.setItem('clickCount', '0');
            }

            // –ü–æ–ª—É—á–∞–µ–º –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
            let referralLink = localStorage.getItem('referralLink');
            if (!referralLink) {
                const randomString = generateRandomString(12); // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É
                referralLink = `https://t.me/mask_token_bot?start=${randomString}`;
                localStorage.setItem('referralLink', referralLink); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –≤ localStorage
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            container.appendChild(heading);
            container.appendChild(subheading);
            container.appendChild(bonusText);
            container.appendChild(claimButton);
            container.appendChild(copyButton);
            container.appendChild(invitedPlayersText);

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            document.getElementById('mainContent').appendChild(container);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω–æ–π 12 —Å–∏–º–≤–æ–ª–æ–≤
        function generateRandomString(length) {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let result = '';
            const charactersLength = characters.length;
            for (let i = 0; i < length; i++) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return result;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç min –¥–æ max
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }



        function showHome() {
            document.getElementById('mainContent').innerHTML = '<div class="coins">' + coins + ' $MASKS</div>';
            updateCoins();
        }

        function showLeaderboard() {
            updateLeaderboard();
            const totalUsers = leaderboard.length;
            document.getElementById('mainContent').innerHTML = 
                '<div class="leaderboard" id="leaderboard">' +
                    '<h1>Leaders</h1>' +
                    '<div class="player-rank">' +
                        '<p id="userRank">Your place: --</p>' +
                    '</div>' +
                    '<div class="leaderboard-info">' +
                        '<span id="userCount">' + totalUsers + ' ' + getPlayersText(totalUsers) + '</span>' +
                        '<span id="top10">(Top 10)</span>' +
                    '</div>' +
                    '<ul id="leaderboardList"></ul>' +
                '</div>';
            renderLeaderboard();
        }

        function showTasks() {
            const advertisers = [
                {
                    name: '–†–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—å 1',
                    tasks: [
                        {description: 'Subscribe to Telegram', link: 'https://t.me/your_channel_1', reward: '+0.00033 $MASKS'},
                        {description: 'Subscribe to Instagram', link: 'https://instagram.com/your_instagram', reward: '+0.000147 $MASKS'},
                        {description: 'Subscribe to YouTube', link: 'https://youtube.com/your_youtube_channel', reward: '+0.000147 $MASKS'}
                    ]
                },
                {
                    name: '–†–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—å 2',
                    tasks: [
                        {description: 'Subscribe to Facebook', link: 'https://facebook.com/your_facebook_page', reward: '+0.000147 $MASKS'},
                        {description: 'Subscribe to Twitter', link: 'https://twitter.com/your_twitter', reward: '+0.000147 $MASKS'}
                    ]
                }
            ];

            const tasksHTML = advertisers.map(advertiser => {
                const tasks = advertiser.tasks.map(task => {
                    const isCompleted = tasksCompleted[task.description];
                    return `
                        <div class="task" style="display: flex; align-items: center; margin-bottom: 10px;">
                            <img src="https://via.placeholder.com/60" alt="Avatar" style="width: 60px; height: 60px; margin-right: 10px;">
                            <div class="task-details" style="flex-grow: 1;">
                                <div class="description" style="font-size: 14px; font-weight: bold;">${task.description}</div>
                                <div class="reward" style="font-size: 14px; color: rgb(0, 202, 0); margin-top: 5px; font-weight: bold; text-align: left; margin-left: 10px;">${task.reward}</div>
                            </div>
                            ${isCompleted ? 
                                `<div class="task-button completed">Done</div>` : 
                                `<button id="button-${task.description}" class="task-button" onclick="completeTask('${task.description}', '${task.reward}')">Do</button>`
                            }
                        </div>
                    `;
                }).join('');
                return `
                    <div class="task-block">
                        <h3>${advertiser.name}</h3>
                        ${tasks}
                    </div>
                `;
            }).join('');

            document.getElementById('mainContent').innerHTML = `<div class="tasks">${tasksHTML}</div>`;
        }

        function completeTask(taskDescription, reward) {
            const button = document.getElementById(`button-${taskDescription}`);
            
            if (button.innerText === "Do") {
                button.innerText = "Check";
            } else if (button.innerText === "Check") {
                button.outerHTML = `<div class="task-button completed">Done</div>`;
                if (!tasksCompleted[taskDescription]) {
                    tasksCompleted[taskDescription] = true;
                    addMasksToBalance(reward);
                    saveTasks();
                }
            }
        }
        
        function addMasksToBalance(reward) {
            const rewardValue = parseFloat(reward);  // –ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            coins += rewardValue; // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
            saveProgress(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
            updateCoins(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        }


        function saveTasks() {
            localStorage.setItem('tasksCompleted', JSON.stringify(tasksCompleted));
        }

        function loadTasks() {
            tasksCompleted = JSON.parse(localStorage.getItem('tasksCompleted')) || {};
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            Telegram.WebApp.ready();
            const user = Telegram.WebApp.initDataUnsafe.user;
            if (user) {
                username = user.username || user.first_name;
            }
            loadProgress();
            loadLeaderboard();
            loadTasks();
            Telegram.WebApp.expand(); // –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
            showHome(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É "–î–æ–º–æ–π" –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        }



        function updateLeaderboard() {
            const userEntry = leaderboard.find(entry => entry.username === username);
            if (userEntry) {
                userEntry.coins = coins;
            } else {
                leaderboard.push({ username: username, coins: coins });
            }
            leaderboard.sort((a, b) => b.coins - a.coins);
            saveLeaderboard();
        }

        function renderLeaderboard() {
            const leaderboardList = document.getElementById('leaderboardList');
            const userRankElem = document.getElementById('userRank');
            leaderboardList.innerHTML = '';
            let userRank = null;
            
            leaderboard.forEach((entry, index) => {
                if (index >= 10) return;
                const li = document.createElement('li');
                const rank = index + 1;
                const rankText = rank <= 3 ? (rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : 'ü•â') : `#${rank}`;
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∫–∏
                const avatar = document.createElement('div');
                avatar.className = 'avatar';
                avatar.style.backgroundColor = getRandomColor(); // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
                avatar.textContent = entry.username.substring(0, 2);
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∞–ª—å–∫–∏ –∏ –∞–≤–∞—Ç–∞—Ä–∫–∏ —Å –æ—Ç—Å—Ç—É–ø–æ–º
                li.innerHTML = `<span class="rank">${rankText}</span>`;
                li.appendChild(avatar);
                li.innerHTML += `<span>${entry.username}</span><span>${entry.coins} $MASKS</span>`;
                leaderboardList.appendChild(li);
                
                if (entry.username === username) {
                    userRank = rank;
                }
            });
            
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–µ –≤ —Ç–æ–ø-10, –Ω–∞—Ö–æ–¥–∏–º –µ–≥–æ –º–µ—Å—Ç–æ –≤ –æ–±—â–µ–º —Å–ø–∏—Å–∫–µ
            if (userRank === null) {
                const overallRank = leaderboard.findIndex(entry => entry.username === username) + 1;
                userRankElem.textContent = 'Your place: ' + (overallRank ? overallRank : '--');
            } else {
                userRankElem.textContent = 'Your place: ' + userRank;
            }
        }

        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function getPlayersText(count) {
            if (count === 1) {
                return 'player';
            } else {
                return 'players';
            }
        }


        function joinTelegramChannel(url) {
            window.open(url, '_blank');
            // –ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
            // –ü—Ä–∏–º–µ—Ä:
            // tasksCompleted[url] = true;
            // updateTaskStatuses();
        }

        function saveProgress() {
            localStorage.setItem('coins', coins);
        }

        function loadProgress() {
            const savedCoins = localStorage.getItem('coins');
            if (savedCoins !== null) {
                coins = parseInt(savedCoins, 10);
                updateCoins();
            }
        }

        function loadProgress() {
            coins = parseFloat(localStorage.getItem('coins')) || 0;
            updateCoins();
        }

        function saveLeaderboard() {
            localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
        }

        function loadLeaderboard() {
            leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞
        const startTime = new Date('2024-10-06T12:15:00+03:00').getTime(); // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
        const endTime = new Date('2025-01-01T00:00:00Z').getTime();

        function updateTimer() {
            const now = new Date().getTime();
            const remainingTime = endTime - now;

            if (remainingTime < 0) {
                document.getElementById("static-timer").innerHTML = "00:00:00";
                return; // –ó–∞–≤–µ—Ä—à–∞–µ–º, –µ—Å–ª–∏ –≤—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ
            }

            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–Ω–∏, —á–∞—Å—ã, –º–∏–Ω—É—Ç—ã –∏ —Å–µ–∫—É–Ω–¥—ã
            const days = Math.floor(remainingTime / (1000 * 60 * 60 * 24));
            const hours = Math.floor((remainingTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));


            

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            document.getElementById("static-timer").innerHTML = 
                `${days}:${hours}:${minutes}`;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        setInterval(updateTimer, 1000);

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ TonConnect –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://mask-bot.github.io/tonconnect-manifest.json',
            buttonRootId: 'ton-connect-button'
        });

        function wallet() {
            document.getElementById('mainContent').innerHTML = 
                `<div style="width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div id="walletStatus" style="margin-top: -150px;">
                        <p id="walletMessage" style="color: red; background-color: rgba(0, 0, 0, 0.5); padding: 10px; font-weight: bold; font-size: 1em; margin-top: 100px;">
                            Your wallet is unavailable. To make it available, please perform a transaction of 0.5 TON (Unlock Wallet button).
                        </p>
                    </div>
                    <div id="donateButtons" style="margin-top: -15px;">
                        <button id="unlockWalletButton" class="donateButton" data-amount="0.5" data-unlock-wallet="true" style="background-color: #800000;">
                            Unlock Wallet
                        </button>
                        <div class="donateButtonsWrapper">
                            <button class="donateButton" data-amount="0.3">
                                Donate 0.3 TON
                                <span class="bonusText">+0.000147 $MASKS</span>
                            </button>
                            <button class="donateButton" data-amount="0.5">
                                Donate 0.5 TON
                                <span class="bonusText">+0.000399 $MASKS</span>
                            </button>
                            <button class="donateButton" data-amount="1">
                                Donate 1 TON
                                <span class="bonusText">+0.000950 $MASKS</span>
                            </button>
                            <button class="donateButton" data-amount="5">
                                Donate 5 TON
                                <span class="bonusText">+0.002100 $MASKS</span>
                            </button>
                        </div>
                        <div style="height: 110px;"></div>
                    </div>
                </div>`;
                
            // –û—Å—Ç–∞–ª—å–Ω–æ–π JavaScript-–∫–æ–¥ –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π


            const unlockButton = document.getElementById('unlockWalletButton');

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
            const walletUnlocked = localStorage.getItem('walletUnlocked') === 'true';
            if (walletUnlocked) {
                document.getElementById('walletMessage').style.color = 'green';
                document.getElementById('walletMessage').textContent = 'Your wallet is unlocked!';

                // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É "Unlock Wallet" –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –∏ —Å–µ—Ä–æ–π
                unlockButton.disabled = true;
                unlockButton.style.backgroundColor = '#7b7b7b'; // –ò–∑–º–µ–Ω—è–µ–º —Ü–≤–µ—Ç –Ω–∞ —Å–µ—Ä—ã–π
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–æ–Ω–∞—Ç–∞
            document.querySelectorAll('.donateButton').forEach(button => {
                button.onclick = async () => {
                    const amount = button.getAttribute('data-amount');
                    const isUnlockWallet = button.getAttribute('data-unlock-wallet') === 'true';
                    let nanocoinsAmount, rewardValue;

                    if (isUnlockWallet) {
                        nanocoinsAmount = '500000000'; // 0.5 TON
                        rewardValue = 0; // –ë–µ–∑ –Ω–∞–≥—Ä–∞–¥—ã
                    } else {
                        switch (amount) {
                            case '0.3':
                                nanocoinsAmount = '300000000';
                                rewardValue = 0.000147;
                                break;
                            case '0.5':
                                nanocoinsAmount = '500000000';
                                rewardValue = 0.000399;
                                break;
                            case '1':
                                nanocoinsAmount = '1000000000';
                                rewardValue = 0.000950;
                                break;
                            case '5':
                                nanocoinsAmount = '5000000000';
                                rewardValue = 0.0021;
                                break;
                            default:
                                alert('Invalid donation amount');
                                return;
                        }
                    }

                    try {
                        const tx = await tonConnectUI.sendTransaction({
                            validUntil: Math.floor(Date.now() / 1000) + 600,
                            messages: [
                                {
                                    address: 'UQASUrYVEDVBoioJjG5_af9nE4VzBQwlyxOWix0OWlNFlLia',
                                    amount: nanocoinsAmount,
                                    payload: '',
                                }
                            ]
                        });

                        if (!isUnlockWallet) {
                            addMasksToBalance(rewardValue);
                            alert(`Donation of ${amount} TON sent successfully! You received ${rewardValue} $MASKS.`);
                        } else {
                            localStorage.setItem('walletUnlocked', 'true');
                            document.getElementById('walletMessage').style.color = 'green';
                            document.getElementById('walletMessage').textContent = 'Your wallet is unlocked!';

                            // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É "Unlock Wallet" –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –∏ –º–µ–Ω—è–µ–º —Ü–≤–µ—Ç –Ω–∞ —Å–µ—Ä—ã–π
                            unlockButton.disabled = true;
                            unlockButton.style.backgroundColor = '#7b7b7b';
                            alert(`Donation of ${amount} TON sent successfully! Wallet unlocked.`);
                        }
                    } catch (error) {
                        console.error('Error:', error);
                    }
                };
            });
        }

    </script>
</body>
</html>
